<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog 
	  xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
	  xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" 
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd"
	  context="cleandev">
    
    <!--
        catalogName="${POSTGRES_CATALOG}" schemaName="${POSTGRES_SCHEMA}" 
        baseTableCatalogName="${POSTGRES_CATALOG}" baseTableSchemaName="${POSTGRES_SCHEMA}" referencedTableCatalogName="${POSTGRES_CATALOG}" referencedTableSchemaName="${POSTGRES_SCHEMA}" 
    -->

    <changeSet author="Carol Geisler" id="tag0">
    	<tagDatabase tag="clean_dev_data_start"/>
    </changeSet>

		<!-- Delete dummy duty recurrence data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_DutyRecurs" context="cleandev">
			<preConditions onFail="CONTINUE">
				<changeSetExecuted changeLogFile="dev/shersched.db.data.dev.xml" author="Michael Gabelmann" id="dev_data_07_duty_recurrence"/>
				<!--sqlCheck expectedResult="0">select count(*) from duty_recurrence WHERE created_by = 'test'</sqlCheck-->
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},duty_recurrence where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_07_duty_recurrence" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy assignment data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Assignments" context="cleandev">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="dev_data_06_assignment"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},assignment where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_06_assignment" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy run data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Runs" context="cleandev">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="dev_data_05_run"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},run where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_05_run" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy sheriff data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Sheriffs" context="cleandev">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="pilotdadev_data_04_sheriffta_04"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},sheriff where badge_no LIKE 'BN%' AND created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_04_sheriff" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy courtroom data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Courtrooms" context="cleandev">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="dev_data_03_courtroom"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},courtroom where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_03_courtroom" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy courthouse data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Courthouses" context="cleandev">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="dev_data_02_courthouse"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},courthouse where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_02_courthouse" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

		<!-- Delete dummy region data if present -->
		
		<changeSet author="Carol Geisler" id="DEL_Dev_Regions" context="cleandev,region">
			<preConditions onFail="WARN">
				<changeSetExecuted changeLogFile="dev/shersched.db.changelog-data.dev.xml" author="Michael Gabelmann" id="dev_data_01_region"/>
			</preConditions>
    	<sql>
    		DELETE FROM ${POSTGRES_SCHEMA},region where created_by='test';
    	</sql>
    	<rollback changeSetPath="dev/shersched.db.changelog-data.dev.xml" changeSetId="dev_data_01_region" changeSetAuthor="Michael Gabelmann"/>
		</changeSet>

    <changeSet author="Carol Geisler" id="tag1">
    	<tagDatabase tag="clean_dev_data_end"/>
    </changeSet>

</databaseChangeLog>